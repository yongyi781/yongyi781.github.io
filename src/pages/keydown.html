<!doctype html>
<html>

<head>
  <title>Keydown Testing</title>
  <link rel="icon" type="image/png" href="/favicon.png" />
</head>

<body>
  <h1>Keydown Testing</h1>
  <p>
    In the textbox, tap a key as lightly as you can. This app will measure the time between the key press and the key
    release. Good keyboards should have lower time.
  </p>
  <input id="input" />
  <div id="time"></div>
  <div id="keydown"></div>
  <div id="keyup"></div>
  <script>
    var keydownTime
    var keyupTime

    function updateDisplay() {
      var diff = keyupTime - keydownTime
      document.querySelector("#time").textContent = diff.toPrecision(4) + " ms"
    }

    document.querySelector("#input").addEventListener("keydown", function (e) {
      e.preventDefault()
      keydownTime = performance.now()
      //console.dir("Key down: " + e);
      document.querySelector("#keydown").textContent += "!"
    })
    document.querySelector("#input").addEventListener("keyup", function (e) {
      e.preventDefault()
      keyupTime = performance.now()
      updateDisplay()
      //console.dir("Key up: " + e);
      document.querySelector("#keydown").textContent = ""
    })
  </script>
</body>

</html>